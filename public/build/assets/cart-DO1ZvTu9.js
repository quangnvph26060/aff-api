import{p as f,u as m,a as r,E as C,Z as y}from"./vendor-BijbZa7l.js";import{a as g}from"./main-CnkUMuTz.js";function U(){const o=g.baseURL,u=(t,a,s)=>{p({icon:t,html:a,showConfirmButton:s})},i={accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")};C();const p=y("$swal"),l=m().getters.user,e=f({data:[],total:0}),d=async t=>{const a={product_id:t,user_id:l.id,amount:1};try{(await r.post(`${o}cart`,a)).data.status==="success"&&u("success","Đã thêm vào giỏ hàng",!1)}catch(s){console.error(s)}},c=async()=>{try{const t=await r.get(`${o}cart`,{headers:i});if(t.data.status==="success"){e.data=t.data.data;let a=0;e.data.forEach(function(s){let n=s.amount,h=s.product.price;a+=n*h}),e.total=a}}catch(t){console.error(t)}};return{addToCart:d,getToCart:c,responseCart:e,delToCart:async t=>{try{(await r.delete(`${o}cart/${t}`)).data.status==="success"&&c()}catch(a){console.error(a)}},updateToCart:async(t,a)=>{const s={id:t,amount:a};try{(await r.post(`${o}cart/update/${t}`,s)).data.status==="success"&&c()}catch(n){console.error(n)}},clearCartUser:async()=>{const t={accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")};try{(await r.post(`${o}cart/clear-cart`,{},{headers:t})).data.status==="success"&&c()}catch(a){console.error(a)}}}}export{U as C};
