import{n as Z,r as c,q as J,d as u,o as p,e as S,g as e,v as i,h as l,F as K,G as W,B as h,f as o,w as n,a5 as ee,a6 as te,u as ae,P as se,Q as oe,x as V,a7 as le}from"./vendor-BYqNKCR2.js";import{O as ne}from"./order-8DX9bPKy.js";import{C as ce}from"./cart-Dw2NEVjK.js";import{a as re}from"./main-B_y2_4ec.js";import{u as m}from"./useFormatCurrency-ovqMsPCw.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B=x=>(se("data-v-33a48bbe"),x=x(),oe(),x),ue={class:"row"},de={class:"col-lg-8 col-12"},pe={class:"flex flex-col mt-5 font-medium text-neutral-700 max-md:max-w-full"},he={class:"mt-1 text-sm text-stone-900 max-md:max-w-full"},me={class:"flex gap-5 self-stretch text-stone-900"},_e={class:"flex flex-col my-auto"},fe={class:"text-lg"},ve={class:"mt-2.5 text-sm text-gray"},ge={class:"flex gap-2.5 self-stretch my-auto text-2xl font-semibold leading-6 whitespace-nowrap"},xe={class:"flex gap-5 justify-between self-stretch my-auto text-sm text-right whitespace-nowrap"},be={class:"my-auto"},ye={key:1},we={class:"col-lg-4 col-12 customer_info"},ke=B(()=>e("header",{class:"flex gap-5 text-2xl font-semibold text-white"},[e("h1",{class:"flex-auto my-auto text-black"},"Thông tin nhận hàng")],-1)),Ce=B(()=>e("hr",{class:"shrink-0 mt-5 h-px bg-indigo-500 border border-indigo-500 border-solid"},null,-1)),Ue={class:"flex gap-5 justify-between mt-5 text-sm text-black"},Se=B(()=>e("div",{class:"flex flex-col"},[e("div",null,"Giỏ hàng"),e("div",{class:"mt-4 text-black"},"Phí ship"),e("div",{class:"mt-2.5 text-black"},"Tổng tiền")],-1)),Be={class:"flex flex-col text-right whitespace-nowrap"},Te={class:"mt-3.5 text-black"},Le={class:"mt-4 text-black"},Oe={class:"font-semibold"},Pe={class:"font-semibold"},Ie={style:{display:"ruby"}},Ne=["src"],je={style:{"text-align":"center"}},Me={class:"font-weight-bold"},Re=B(()=>e("p",null,"loading...",-1)),Ve=Z({__name:"index",setup(x){const I=ae(),b=c(""),_=c(!1),T=c(""),y=c(""),w=c(""),k=c(""),N=c(""),{getToCart:j,responseCart:r,delToCart:$,updateToCart:A,clearCartUser:G}=ce(),{submitOrder:F}=ne(),f=c(""),M=c([]);J(async()=>{const s=await I.getters.user,a=await I.getters.admin;b.value=s,s.active_user_package&&(f.value=s.active_user_package.package[0].reduced_price??""),a&&a.user_info&&a.user_info.length>0&&(N.value=a.user_info[0].branch),y.value=b.value.name,w.value=b.value.phone,k.value=b.value.address,await j(),M.value=r.data});async function H(s,a){await A(s.id,a),await j()}function D(s){$(s)}const Q=s=>{const a=re.URL,d=s.replace("public","storage");return`${a}/${d}`};function X(){for(var s="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",d=a.length,C=0;C<8;C++){var O=Math.floor(Math.random()*d),v=a.charAt(O);s+=v}T.value=s,r.data.length>0&&(_.value=!0)}const L=c(!1),q=async()=>{L.value=!0;const s={name:y.value,receive_address:k.value,phone:w.value,list_product:M.value,zip_code:T.value,total_money:r.total};try{await F(s),await G(),_.value=!1}catch{}finally{L.value=!1}},R=()=>{_.value=!1};return(s,a)=>{const d=u("a-image"),C=u("a-input-number"),O=u("RouterLink"),v=u("a-input"),U=u("a-form-item"),P=u("a-button"),z=u("a-modal"),E=u("a-form");return p(),S("div",ue,[e("div",de,[e("section",pe,[e("p",he," Bạn có "+i(l(r).data.length)+" trong giỏ hàng ",1),l(r).data.length>0?(p(!0),S(K,{key:0},W(l(r).data,(t,Y)=>(p(),S("article",{class:"flex gap-5 justify-between items-center py-2.5 pr-10 pl-2.5 mt-8 w-full bg-white rounded-2xl shadow-sm max-md:flex-wrap max-md:pr-5 max-md:max-w-full",key:Y},[e("div",me,[t.product&&t.product.images&&t.product.images.length>0?(p(),V(d,{key:0,src:Q(t.product.images[0].image_path),preview:!1,class:"object-fill",style:{width:"100px",height:"100px"},onClick:a[0]||(a[0]=g=>s.handleSelected(s.product.id))},null,8,["src"])):(p(),V(d,{key:1,src:"Capture.PNG",preview:!1,class:"object-fill",style:{width:"100px",height:"100px"},onClick:a[1]||(a[1]=g=>s.handleSelected(s.product.id))})),e("div",_e,[e("h3",fe,i(t.product.name),1),e("p",ve,i(l(m)(f.value!==""?t.product.price-t.product.price*(f.value/100):t.product.price)),1)])]),e("div",ge,[o(C,{value:t.amount,"onUpdate:value":g=>t.amount=g,size:"large",min:1,max:t.product.quantity,onChange:g=>H(t,t.amount)},null,8,["value","onUpdate:value","max","onChange"])]),e("div",xe,[e("span",be,i(l(m)(t.amount*(f.value!==""?t.product.price-t.product.price*(f.value/100):t.product.price))),1),o(l(le),{class:"text-xl cursor-pointer",onClick:g=>D(t.id)},null,8,["onClick"])])]))),128)):(p(),S("div",ye,[h(" Giỏ hàng trống "),o(O,{to:{name:"products"}},{default:n(()=>[h("Mua hàng")]),_:1})]))])]),e("div",we,[ke,e("section",null,[o(E,{layout:"vertical",class:"text-black"},{default:n(()=>[o(U,{label:"Họ và tên",class:"mt-5 mb-2 text-black"},{default:n(()=>[o(v,{class:"h-[40px] custom-input white-input",value:y.value,"onUpdate:value":a[2]||(a[2]=t=>y.value=t),placeholder:"ex: Nguyễn Văn A"},null,8,["value"])]),_:1}),o(U,{class:"mb-2",label:"Số điện thoại",style:{color:"black"}},{default:n(()=>[o(v,{class:"h-[40px] white-input",value:w.value,"onUpdate:value":a[3]||(a[3]=t=>w.value=t),placeholder:"ex: 0987654321"},null,8,["value"])]),_:1}),o(U,{class:"mb-2 white-input",label:"Địa chỉ"},{default:n(()=>[o(v,{class:"h-[40px] white-input",value:k.value,"onUpdate:value":a[4]||(a[4]=t=>k.value=t),placeholder:"ex: 123 Đường ABC, Phường XYZ, Quận 1"},null,8,["value"])]),_:1}),Ce,e("section",Ue,[Se,e("div",Be,[e("div",null,i(l(m)(l(r).total)),1),e("div",Te,i(l(m)(0)),1),e("div",Le,i(l(m)(l(r).total)),1)])]),o(U,{class:"mt-5",onClick:X},{default:n(()=>[o(P,{type:"primary",class:"w-full h-[60px] flex justify-between items-center text-base bg-secondary"},{default:n(()=>[e("span",Oe,i(l(m)(l(r).total)),1),e("span",Pe,[h(" Thanh toán "),o(l(ee),{class:"ml-2"})])]),_:1})]),_:1}),o(z,{visible:_.value,"onUpdate:visible":a[5]||(a[5]=t=>_.value=t),title:"Thanh toán",onCancel:R},te({default:n(()=>[e("div",Ie,[e("img",{src:N.value,alt:"Hình ảnh",style:{width:"80%"}},null,8,Ne)]),e("p",je,[h(" Nội dung chuyển khoản: "),e("span",Me,i(T.value),1)])]),_:2},[L.value!=!0?{name:"footer",fn:n(()=>[o(P,{onClick:R},{default:n(()=>[h("Hủy")]),_:1}),o(P,{type:"primary",class:"bg-secondary",onClick:q},{default:n(()=>[h("Xác nhận")]),_:1})]),key:"0"}:{name:"footer",fn:n(()=>[Re]),key:"1"}]),1032,["visible"])]),_:1})])])])}}}),Qe=ie(Ve,[["__scopeId","data-v-33a48bbe"]]);export{Qe as default};
