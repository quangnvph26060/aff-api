import{n as Y,r as i,q as Z,d,o as p,e as U,g as e,v as r,h as l,F as J,H as K,B as m,f as o,w as n,a3 as W,a4 as ee,u as te,R as ae,U as se,x as P,a5 as oe}from"./vendor-BijbZa7l.js";import{O as le}from"./order-CZFK7uUy.js";import{C as ne}from"./cart-Dy00iqtM.js";import{a as ce}from"./main-B_o5tOv-.js";import{u as h}from"./useFormatCurrency-ovqMsPCw.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S=x=>(ae("data-v-4623bb8e"),x=x(),se(),x),re={class:"row"},de={class:"col-lg-8 col-12"},ue={class:"flex flex-col mt-5 font-medium text-neutral-700 max-md:max-w-full"},pe={class:"mt-1 text-sm text-stone-900 max-md:max-w-full"},me={class:"flex gap-5 self-stretch text-stone-900"},he={class:"flex flex-col my-auto"},_e={class:"text-lg"},fe={class:"mt-2.5 text-sm text-gray"},ve={class:"flex gap-2.5 self-stretch my-auto text-2xl font-semibold leading-6 whitespace-nowrap"},xe={class:"flex gap-5 justify-between self-stretch my-auto text-sm text-right whitespace-nowrap"},ge={class:"my-auto"},be={key:1},ye={class:"col-lg-4 col-12 customer_info"},we=S(()=>e("header",{class:"flex gap-5 text-2xl font-semibold text-white"},[e("h1",{class:"flex-auto my-auto text-black"},"Thông tin nhận hàng")],-1)),ke=S(()=>e("hr",{class:"shrink-0 mt-5 h-px bg-indigo-500 border border-indigo-500 border-solid"},null,-1)),Ce={class:"flex gap-5 justify-between mt-5 text-sm text-black"},Ue=S(()=>e("div",{class:"flex flex-col"},[e("div",null,"Giỏ hàng"),e("div",{class:"mt-4 text-black"},"Phí ship"),e("div",{class:"mt-2.5 text-black"},"Tổng tiền")],-1)),Se={class:"flex flex-col text-right whitespace-nowrap"},Be={class:"mt-3.5 text-black"},Te={class:"mt-4 text-black"},Ie={class:"font-semibold"},Le={class:"font-semibold"},Oe={style:{display:"ruby"}},Ne=["src"],Re={style:{"text-align":"center"}},je={class:"font-weight-bold"},Me=S(()=>e("p",null,"loading...",-1)),Pe=Y({__name:"index",setup(x){const O=te(),g=i(""),_=i(!1),B=i(""),b=i(""),y=i(""),w=i(""),N=i(""),{getToCart:R,responseCart:c,delToCart:V,updateToCart:$,clearCartUser:A}=ne(),{submitOrder:H}=le(),j=i([]);Z(async()=>{const s=await O.getters.user,t=await O.getters.admin;g.value=s,t&&t.user_info&&t.user_info.length>0&&(N.value=t.user_info[0].branch),b.value=g.value.name,y.value=g.value.phone,w.value=g.value.address,await R(),j.value=c.data});async function F(s,t){await $(s.id,t),await R()}function G(s){V(s)}const D=s=>{const t=ce.URL,u=s.replace("public","storage");return`${t}/${u}`};function X(){for(var s="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",u=t.length,k=0;k<8;k++){var I=Math.floor(Math.random()*u),f=t.charAt(I);s+=f}B.value=s,c.data.length>0&&(_.value=!0)}const T=i(!1),q=async()=>{T.value=!0;const s={name:b.value,receive_address:w.value,phone:y.value,list_product:j.value,zip_code:B.value,total_money:c.total};try{await H(s),await A(),_.value=!1}catch{}finally{T.value=!1}},M=()=>{_.value=!1};return(s,t)=>{const u=d("a-image"),k=d("a-input-number"),I=d("RouterLink"),f=d("a-input"),C=d("a-form-item"),L=d("a-button"),z=d("a-modal"),E=d("a-form");return p(),U("div",re,[e("div",de,[e("section",ue,[e("p",pe," Bạn có "+r(l(c).data.length)+" trong giỏ hàng ",1),l(c).data.length>0?(p(!0),U(J,{key:0},K(l(c).data,(a,Q)=>(p(),U("article",{class:"flex gap-5 justify-between items-center py-2.5 pr-10 pl-2.5 mt-8 w-full bg-white rounded-2xl shadow-sm max-md:flex-wrap max-md:pr-5 max-md:max-w-full",key:Q},[e("div",me,[a.product&&a.product.images&&a.product.images.length>0?(p(),P(u,{key:0,src:D(a.product.images[0].image_path),preview:!1,class:"object-fill",style:{width:"100px",height:"100px"},onClick:t[0]||(t[0]=v=>s.handleSelected(s.product.id))},null,8,["src"])):(p(),P(u,{key:1,src:"Capture.PNG",preview:!1,class:"object-fill",style:{width:"100px",height:"100px"},onClick:t[1]||(t[1]=v=>s.handleSelected(s.product.id))})),e("div",he,[e("h3",_e,r(a.product.name),1),e("p",fe,r(l(h)(a.product.price)),1)])]),e("div",ve,[o(k,{value:a.amount,"onUpdate:value":v=>a.amount=v,size:"large",min:1,max:a.product.quantity,onChange:v=>F(a,a.amount)},null,8,["value","onUpdate:value","max","onChange"])]),e("div",xe,[e("span",ge,r(l(h)(a.amount*a.product.price)),1),o(l(oe),{class:"text-xl cursor-pointer",onClick:v=>G(a.id)},null,8,["onClick"])])]))),128)):(p(),U("div",be,[m(" GIỏ hàng trống "),o(I,{to:{name:"products"}},{default:n(()=>[m("Mua hàng")]),_:1})]))])]),e("div",ye,[we,e("section",null,[o(E,{layout:"vertical",class:"text-black"},{default:n(()=>[o(C,{label:"Họ và tên",class:"mt-5 mb-2 text-black"},{default:n(()=>[o(f,{class:"h-[40px] custom-input white-input",value:b.value,"onUpdate:value":t[2]||(t[2]=a=>b.value=a),placeholder:"ex: Nguyễn Văn A"},null,8,["value"])]),_:1}),o(C,{class:"mb-2",label:"Số điện thoại",style:{color:"black"}},{default:n(()=>[o(f,{class:"h-[40px] white-input",value:y.value,"onUpdate:value":t[3]||(t[3]=a=>y.value=a),placeholder:"ex: 0987654321"},null,8,["value"])]),_:1}),o(C,{class:"mb-2 white-input",label:"Địa chỉ"},{default:n(()=>[o(f,{class:"h-[40px] white-input",value:w.value,"onUpdate:value":t[4]||(t[4]=a=>w.value=a),placeholder:"ex: 123 Đường ABC, Phường XYZ, Quận 1"},null,8,["value"])]),_:1}),ke,e("section",Ce,[Ue,e("div",Se,[e("div",null,r(l(h)(l(c).total)),1),e("div",Be,r(l(h)(0)),1),e("div",Te,r(l(h)(l(c).total)),1)])]),o(C,{class:"mt-5",onClick:X},{default:n(()=>[o(L,{type:"primary",class:"w-full h-[60px] flex justify-between items-center text-base bg-secondary"},{default:n(()=>[e("span",Ie,r(l(h)(l(c).total)),1),e("span",Le,[m(" Thanh toán "),o(l(W),{class:"ml-2"})])]),_:1})]),_:1}),o(z,{visible:_.value,"onUpdate:visible":t[5]||(t[5]=a=>_.value=a),title:"Thanh toán",onCancel:M},ee({default:n(()=>[e("div",Oe,[e("img",{src:N.value,alt:"Hình ảnh",style:{width:"80%"}},null,8,Ne)]),e("p",Re,[m(" Nội dung chuyển khoản: "),e("span",je,r(B.value),1)])]),_:2},[T.value!=!0?{name:"footer",fn:n(()=>[o(L,{onClick:M},{default:n(()=>[m("Hủy")]),_:1}),o(L,{type:"primary",class:"bg-secondary",onClick:q},{default:n(()=>[m("Xác nhận")]),_:1})]),key:"0"}:{name:"footer",fn:n(()=>[Me]),key:"1"}]),1032,["visible"])]),_:1})])])])}}}),De=ie(Pe,[["__scopeId","data-v-4623bb8e"]]);export{De as default};
