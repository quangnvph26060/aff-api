import{O as N}from"./order-DZD9dnw0.js";import{u as G}from"./useFormatCurrency-ovqMsPCw.js";import{n as E,r as T,q as V,p as D,d as y,o as a,x as Q,w as s,g as O,f as o,h as b,a8 as L,B as l,a9 as U,e as n,F as k,I as j,z as S,v as p,aa as J,ab as W,G as X,H as Y}from"./vendor-ZmbnWLp6.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./main-H3fHEa0S.js";const K={style:{padding:"8px"}},ee={key:0},te={key:1,class:"space-x-3"},ae={key:2},ne={key:3},se=E({__name:"index",setup(_){const{getOrder:v,responseOrder:f,deleteOrderUser:C}=N();T(5);const w=T([]);V(async()=>{await v(),w.value=f.data});const $=e=>e?J(new Date(e),"yyyy-MM-dd"):"",I=T(),c=D({searchText:"",searchedColumn:""}),z=(e,t,i)=>{t(),c.searchText=e[0],c.searchedColumn=i},H=e=>{e({confirm:!0}),c.searchText=""},M=async e=>{confirm("Bạn chăc chắn có muốn hủy đơn hàng này không ?")&&(await C(e),await v(),w.value=f.data)},P=[{title:"STT",dataIndex:"id",render:(e,t,i)=>i+1,width:10},{title:"Tên",dataIndex:"name",customFilterDropdown:!0,onFilter:(e,t)=>t.name.toString().toLowerCase().includes(e.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout(()=>{I.value.focus()},100)},width:250},{title:"Ngày tạo",dataIndex:"created_at",width:250},{title:"Trạng thái",dataIndex:"status",filters:[{text:"Chờ xử lý",value:1},{text:"Đang vận chuyển",value:2},{text:"Đã giao hàng",value:3},{text:"Đã hủy",value:4},{text:"Đã hoàn tiền",value:5},{text:"Tạm dừng",value:6},{text:"Thất bại",value:7}],onFilter:(e,t)=>t.status===e,width:160},{title:"Tổng tiền",dataIndex:"total_money",sorter:{compare:(e,t)=>e.total-t.total},width:200},{title:"Hành động",dataIndex:"operation",width:200}];function F(e,t,i,m){console.log("params",e,t,i,m),e.pageSize=e.pageSize}const B=D({pageSize:10,showSizeChanger:!0,responsive:!0,showLessItems:!0,onChange:(e,t)=>{B.pageSize=t,F({current:e,pageSize:t},{},{},{action:"paginate"})}});function R(e){switch(e){case 1:return"Chờ xử lý ";case 2:return"Đang vận chuyển";case 3:return"Đã giao hàng";case 4:return"Đã hủy";case 5:return"Đã hoàn tiền";case 6:return"Tạm dừng";case 7:return"Thất bại";default:return""}}return(e,t)=>{const i=y("a-input"),m=y("a-button"),q=y("a-tag"),A=y("a-table");return a(),Q(A,{columns:P,"data-source":w.value,onChange:F,pagination:B,scroll:{x:1200}},{customFilterDropdown:s(({setSelectedKeys:r,selectedKeys:d,confirm:u,clearFilters:h,column:x})=>[O("div",K,[o(i,{ref_key:"searchInput",ref:I,placeholder:`Tìm ${x.title}`,value:d[0],style:{width:"188px","margin-bottom":"8px",display:"block"},onChange:g=>r(g.target.value?[g.target.value]:[]),onPressEnter:g=>z(d,u,x.dataIndex)},null,8,["placeholder","value","onChange","onPressEnter"]),o(m,{type:"primary",size:"small",style:{width:"90px","margin-right":"8px"},onClick:g=>z(d,u,x.dataIndex)},{icon:s(()=>[o(b(L))]),default:s(()=>[l(" Tìm ")]),_:2},1032,["onClick"]),o(m,{size:"small",style:{width:"90px"},onClick:g=>H(h)},{default:s(()=>[l(" Đặt lại ")]),_:2},1032,["onClick"])])]),customFilterIcon:s(({filtered:r})=>[o(b(L),{style:U({color:r?"#108ee9":void 0})},null,8,["style"])]),bodyCell:s(({column:r,text:d,record:u})=>[c.searchText&&c.searchedColumn===r.dataIndex?(a(),n("span",ee,[(a(!0),n(k,null,j(d.toString().split(new RegExp(`(?<=${c.searchText})|(?=${c.searchText})`,"i")),(h,x)=>(a(),n(k,null,[h.toLowerCase()===c.searchText.toLowerCase()?(a(),n("mark",{key:x,class:"highlight"},p(h),1)):(a(),n(k,{key:1},[l(p(h),1)],64))],64))),256))])):S("",!0),r.dataIndex==="operation"?(a(),n("div",te,[o(m,{onClick:h=>M(u.id),disabled:u.status!==1,type:"primary",size:"small",danger:""},{default:s(()=>[l(" Hủy hàng ")]),_:2},1032,["onClick","disabled"])])):r.dataIndex==="status"?(a(),n("div",ae,[o(q,null,{default:s(()=>[l(p(R(d)),1)]),_:2},1024)])):r.dataIndex==="total_money"?(a(),n("div",ne,p(b(G)(d)),1)):S("",!0),r.dataIndex==="created_at"?(a(),n(k,{key:4},[l(p($(u.created_at)),1)],64)):S("",!0)]),_:1},8,["data-source","pagination"])}}}),oe=_=>(X("data-v-3acf36b6"),_=_(),Y(),_),re={class:"main_mobi-mt"},ce=oe(()=>O("span",{class:"font-bold"},"Quản lý đơn hàng",-1)),ie={class:"flex items-center text-xs text-green-500 mt-1"},de=E({__name:"index",setup(_){const{getOrder:v,responseOrder:f}=N(),C=T(0);return V(async()=>{await v(),C.value=f.count}),(w,$)=>{const I=y("a-card");return a(),n("div",re,[o(I,null,{title:s(()=>[ce,O("div",ie,[o(b(W),{class:"mr-1"}),l(" "+p(C.value)+" đơn thành công ",1)])]),default:s(()=>[o(se)]),_:1})])}}}),me=Z(de,[["__scopeId","data-v-3acf36b6"]]);export{me as default};
