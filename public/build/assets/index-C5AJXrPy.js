import{n as tt,r as l,q as et,d,o as h,e as B,g as t,v as r,h as n,F as at,I as st,B as m,f as o,w as c,a4 as ot,a5 as nt,u as lt,G as ct,H as it,y as rt,x as z,a6 as dt}from"./vendor-ZmbnWLp6.js";import{O as ut}from"./order-DZD9dnw0.js";import{C as pt}from"./cart-TYIKaryu.js";import{a as ht}from"./main-H3fHEa0S.js";import{u as _}from"./useFormatCurrency-ovqMsPCw.js";import{_ as mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const p=y=>(ct("data-v-a28cdda5"),y=y(),it(),y),_t={class:"row main-cart"},vt={class:"col-lg-8 col-12 main-mb-3"},ft={class:"flex flex-col mt-5 font-medium text-neutral-700 max-md:max-w-full main-mobi-cart"},gt={class:"mt-3 text-sm text-stone-900 max-md:max-w-full"},xt={class:"flex gap-5 self-stretch text-stone-900 main-mobi-gap-1"},bt={class:"flex flex-col my-auto cart-with"},yt={class:"text-lg"},wt={class:"mt-2.5 text-sm text-gray"},kt={class:"flex gap-2.5 self-stretch my-auto text-2xl font-semibold leading-6 whitespace-nowrap"},Ct={class:"flex gap-5 justify-between self-stretch my-auto text-sm text-right whitespace-nowrap"},St={class:"my-auto"},Ut={key:1},Tt={class:"col-lg-4 col-12 customer_info"},Bt=p(()=>t("header",{class:"flex gap-5 text-2xl font-semibold text-white"},[t("h1",{class:"flex-auto my-auto text-black"},"Thông tin nhận hàng")],-1)),It={class:"shipping"},Mt=p(()=>t("div",null,[t("label",{class:"text-black"},"Phương thức thanh toán")],-1)),Lt={class:"shippingMethod"},Ot={class:"radio-container"},Pt=["v-model"],Nt=p(()=>t("label",{class:"text-black"},"Thanh toán chuyển khoản",-1)),Rt={class:"radio-container"},$t=["v-model"],jt=p(()=>t("label",{class:"text-black"},"Thanh toán khi nhận hàng",-1)),Vt=p(()=>t("hr",{class:"shrink-0 mt-5 h-px bg-indigo-500 border border-indigo-500 border-solid"},null,-1)),At={class:"flex gap-5 justify-between mt-5 text-sm text-black"},Ht=p(()=>t("div",{class:"flex flex-col"},[t("div",null," Tạm tính "),t("div",{class:"mt-2.5 text-black"},"Phí ship"),t("div",{class:"mt-2.5 text-black"},"Tổng tiền")],-1)),Ft={class:"flex flex-col text-right whitespace-nowrap"},Gt={class:"mt-3.5 text-black"},zt={class:"mt-3.5 text-black"},Dt={class:"font-semibold"},Xt={class:"font-semibold"},qt={style:{display:"ruby"}},Et=["src"],Qt={style:{"text-align":"center"}},Yt={class:"font-weight-bold"},Zt=p(()=>t("p",null,"loading...",-1)),Jt=tt({__name:"index",setup(y){const N=lt(),w=l(""),v=l(!1),f=l(""),R=l(""),k=l(""),C=l(""),S=l(""),$=l(""),{getToCart:j,responseCart:i,delToCart:D,updateToCart:X,clearCartUser:q}=pt(),{submitOrder:E}=ut(),g=l(""),V=l([]);et(async()=>{const s=await N.getters.user,e=await N.getters.admin;w.value=s,s.active_user_package&&(g.value=s.active_user_package.package[0].reduced_price??""),e&&e.user_info&&e.user_info.length>0&&($.value=e.user_info[0].branch),k.value=w.value.name,C.value=w.value.phone,S.value=w.value.address,await j(),V.value=i.data});async function Q(s,e){await X(s.id,e),await j()}function Y(s){D(s)}const x=l(1),A=s=>{x.value=parseInt(s.target.value)},Z=s=>{const e=ht.URL,u=s.replace("public","storage");return`${e}/${u}`};function H(s=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let u="";const M=e.length;for(let U=0;U<s;U++)u+=e.charAt(Math.floor(Math.random()*M));return u}function J(){const s=H();f.value=s,i.data.length>0&&(v.value=!0)}const I=l(!1),F=async()=>{if(I.value=!0,f.value===""){const e=H();R.value=e}const s={name:k.value,receive_address:S.value,phone:C.value,list_product:V.value,zip_code:f.value===""?R.value:f.value,total_money:i.total,payment_method:x.value};try{await E(s),await q(),v.value=!1}catch{}finally{I.value=!1}},G=()=>{v.value=!1};return(s,e)=>{const u=d("a-image"),M=d("a-input-number"),U=d("RouterLink"),L=d("a-input"),T=d("a-form-item"),O=d("a-button"),K=d("a-modal"),W=d("a-form");return h(),B("div",_t,[t("div",vt,[t("section",ft,[t("p",gt," Bạn có "+r(n(i).data.length)+" trong giỏ hàng ",1),n(i).data.length>0?(h(!0),B(at,{key:0},st(n(i).data,(a,P)=>(h(),B("article",{class:rt(["flex gap-5 justify-between items-center py-2.5 pr-10 pl-2.5 w-full bg-white rounded-2xl shadow-sm max-md:flex-wrap max-md:pr-5 max-md:max-w-full",{"mt-3":P===0,"mt-8":P!==0}]),key:P},[t("div",xt,[a.product&&a.product.images&&a.product.images.length>0?(h(),z(u,{key:0,src:Z(a.product.images[0].image_path),preview:!1,class:"object-fill",style:{width:"100px",height:"100px"},onClick:e[0]||(e[0]=b=>s.handleSelected(s.product.id))},null,8,["src"])):(h(),z(u,{key:1,src:"Capture.PNG",preview:!1,class:"object-fill",style:{width:"100px",height:"100px"},onClick:e[1]||(e[1]=b=>s.handleSelected(s.product.id))})),t("div",bt,[t("h3",yt,r(a.product.name),1),t("p",wt,r(n(_)(g.value!==""?a.product.price-a.product.price*(g.value/100):a.product.price)),1)])]),t("div",kt,[o(M,{value:a.amount,"onUpdate:value":b=>a.amount=b,size:"large",min:1,max:a.product.quantity,onChange:b=>Q(a,a.amount)},null,8,["value","onUpdate:value","max","onChange"])]),t("div",Ct,[t("span",St,r(n(_)(a.amount*(g.value!==""?a.product.price-a.product.price*(g.value/100):a.product.price))),1),o(n(dt),{class:"text-xl cursor-pointer",onClick:b=>Y(a.id)},null,8,["onClick"])])],2))),128)):(h(),B("div",Ut,[m(" Giỏ hàng trống "),o(U,{to:{name:"products"}},{default:c(()=>[m("Mua hàng")]),_:1})]))])]),t("div",Tt,[Bt,t("section",null,[o(W,{layout:"vertical",class:"text-black"},{default:c(()=>[o(T,{label:"Họ và tên",class:"mt-5 mb-2 text-black"},{default:c(()=>[o(L,{class:"h-[40px] custom-input white-input",value:k.value,"onUpdate:value":e[2]||(e[2]=a=>k.value=a),placeholder:"ex: Nguyễn Văn A"},null,8,["value"])]),_:1}),o(T,{class:"mb-2",label:"Số điện thoại",style:{color:"black"}},{default:c(()=>[o(L,{class:"h-[40px] white-input",value:C.value,"onUpdate:value":e[3]||(e[3]=a=>C.value=a),placeholder:"ex: 0987654321"},null,8,["value"])]),_:1}),o(T,{class:"mb-2 white-input",label:"Địa chỉ"},{default:c(()=>[o(L,{class:"h-[40px] white-input",value:S.value,"onUpdate:value":e[4]||(e[4]=a=>S.value=a),placeholder:"ex: 123 Đường ABC, Phường XYZ, Quận 1"},null,8,["value"])]),_:1}),t("div",It,[Mt,t("div",Lt,[t("ul",null,[t("li",Ot,[t("input",{type:"radio",name:"shipping",onChange:e[5]||(e[5]=a=>A(a)),"v-model":x.value,value:1,checked:""},null,40,Pt),Nt]),t("li",Rt,[t("input",{type:"radio",name:"shipping",onChange:e[6]||(e[6]=a=>A(a)),"v-model":x.value,value:2},null,40,$t),jt])])])]),Vt,t("section",At,[Ht,t("div",Ft,[t("div",null,r(n(_)(n(i).total)),1),t("div",Gt,r(n(_)(0)),1),t("div",zt,r(n(_)(n(i).total)),1)])]),o(T,{class:"mt-5",onClick:e[7]||(e[7]=a=>x.value===1?J():F())},{default:c(()=>[o(O,{type:"primary",class:"w-full h-[60px] flex justify-between items-center text-base bg-secondary"},{default:c(()=>[t("span",Dt,r(n(_)(n(i).total)),1),t("span",Xt,[m(" Thanh toán "),o(n(ot),{class:"ml-2"})])]),_:1})]),_:1}),o(K,{visible:v.value,"onUpdate:visible":e[8]||(e[8]=a=>v.value=a),title:"Thanh toán",onCancel:G},nt({default:c(()=>[t("div",qt,[t("img",{src:$.value,alt:"Hình ảnh",style:{width:"80%"}},null,8,Et)]),t("p",Qt,[m(" Nội dung chuyển khoản: "),t("span",Yt,r(f.value),1)])]),_:2},[I.value!=!0?{name:"footer",fn:c(()=>[o(O,{onClick:G},{default:c(()=>[m("Hủy")]),_:1}),o(O,{type:"primary",class:"bg-secondary",onClick:F},{default:c(()=>[m("Xác nhận")]),_:1})]),key:"0"}:{name:"footer",fn:c(()=>[Zt]),key:"1"}]),1032,["visible"])]),_:1})])])])}}}),oe=mt(Jt,[["__scopeId","data-v-a28cdda5"]]);export{oe as default};
